<html>
<head>
<title>imgcomp configuration options</title>
<style type=text/css>
  body { font-family: sans-serif; font-size: 100%;}
  div.c { white-space: pre; font-family: monospace; font-weight: bold; font-size: 120%;}
  div.p { white-space: pre; font-family: monospace; font-weight: bold; font-size: 140%;}
  span.c { font-family: monospace; font-weight: bold; font-size: 120%;}
</style></head>
<h2>imgcomp configuration options</h2>

There are two ways to run imgcomp: Test mode and process mode.
In test mode, two file names are provided on the command line, and it will compare the two
and output debug information about the differences.
<p>
The other mode is to run it so it launches raspistill to capture images, or
just to run it through an already captured series of images for post-analysis.
Whether imcomp uses live images captured from raspistill or just operates on a directory
is specified by the command line options.
<p>
Parameters can be in a configuration file (imgcomp.conf) or on the command line.  Parmaters
in imgcomp.conf are read first, and may be overriden by parameters on the command line.
<p>
Configuration file optins are in the form of:
<p>
<div class="c">parameter = value</div>
<p>
<div class="p">scale</div>
How much to scale jpeg images by before running the detection algorithm.  Scaling the image
down makes the program run faster and less susceptible to pixel noise.  Scale value can be
1, 2, 4 or 8.  Default is 4.  4 is the only value that has been tested.
<p>
<div class="p">region</div>
Specifies what region of the image that detection is to be done over.
The region is specified as x1-x2,y1-y2.  For example 256-768,192-576 would specify
and area in the middle, and half the size of a 1024x768 image.  By default, image detection
is over the entire image.

<div class="p">exclude</div>
Specifies a rectangular image to be excluded from detection.  The region is specified
in the format x1-x2,y1-y2, similar to "region".  If your detection region contains a lot
of excluded area, I recommend using the "diffmap" option instead.

<div class="p">diffmap</div>
Specifies the name of a jpeg file that is the map of a jpeg image.  Areas of pure blue
will be excluded from the image, and areas of pure red will be weighted twice as heavily
in image detection.  Most natural images do not contain sufficiently red or blue areas
to be considered "ignore" or "double", so you can take a capture image and paint
areas to ignore (such as trees or flags that move with the wind) blue, without having
the rest of the image trigger on this.  When imgcomp starts with a diffmap, it shows
(in text) which areas are ignore or high weight.

<div class="p">dodir</div>
Specifies which directory full of images to process.  This is for offline mode
(not using live captures using raspistill).  Source images are not deleted.

<div class="p">followdir</div>
Specifies a directory to monitor for new images.  As new images appear,
imgcomp processes them and deletes them.

<div class="p">aquire_cmd</div>
Indicates the command line to launch raspistill with.  This line will in turn have a lot
of options to pass to raspistill.  Potentially, you could have imgcomp run another
image aquisition program instead.  The reason imgcomp launches raspistill is that it
will monitor that it still works and re-launch raspistill if necessary.  Imgcomp will also
check if the image has become too britht or too dim and re-launch raspistill so that
raspistill can re-do the auto exposure (raspistill will not adjust the exposure settings
when running in timelapse mode).  The aquire_cmd parameter is only used in followdir
mode. 

<div class="p">savedir</div>
Specifies with directory to save images to.

<div class="p">savenames</div>
Output naming scheme.  Uses strftime to format the output name.  
May include '/' characters to put different images in different directories.
The default "savenames" value is "%m%d/%H/%m%d-%H%M%S".  This value causes
imgcomp to create a directory for every day and every hour, and save the images
with the naming scheme "MMDD-HHMMSS".  An image on July 20 at 11:50:58 would
be placed in 07/20-115058.  This name will be appended with a space and the
diff magnitude value of three digits.  In addition, if more than one image is
aquired per second, the space will be replaced with a, b, or c, etc.

<div class="p">sensitivity</div>
Indicates how sensitive the program is.  I typically use values around 100.  However,
this value is higly dependent on image resolution.

<div class="p">blink_cmd</div>
Raspistill can blink the LED on the raspberry pi camera module when it detects
motion.  It uses a separate program 

sensitivity N       Set sensitivity.  Lower=more sensitive\n");
blink_cmd <command> Run this command when motion detected\n"
                    (used to blink the camera LED)\n");
tl N                Save image every N seconds regardless\n");
outfile name  Specify name for output file\n");
verbose or -debug   Emit more verbose output\n");

